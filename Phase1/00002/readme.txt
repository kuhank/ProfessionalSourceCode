general code for adhoc operation for client
